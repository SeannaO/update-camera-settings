<!DOCTYPE html>
<html>
    <head>
		<script>
			var camId = "<%= _id %>";
		</script>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="/css/jquery-ui.css">
		<link rel="stylesheet" href="/css/lib/default.css">
		<link rel="stylesheet" href="/css/lib/default.date.css">
		<link rel="stylesheet" href="/css/lib/cspinners.css" />
		<link rel="stylesheet" href="/css/lib/toastr.min.css" />

        <link rel="stylesheet" href="/css/cam.css">

		<!-- timeline css -->
        <link rel="stylesheet" href="/css/timeline.css">
		<!-- timeline css -->
		

        <script src = "/js/jquery.min.js"></script>        
        <script src = "/js/jquery-ui.min.js"></script>

        <script src="/js/socket.io.js"></script>

		<script src="/js/lib/toastr.js"></script>

		<!-- those three lines are needed for the timeline -->
		<script src = "/js/indexer.js"></script> 
		<script src = "/js/timeline.js"></script>
		<script src="/js/timeline-selector.js"></script>
		<!-- those three lines are needed for the timeline -->

		<script type="text/javascript" src="/js/swfobject.js"></script>
        <script src = "/js/cameraPage.js"></script>

        <script src="/js/moment.min.js"></script>
        <script src="/js/lib/path.min.js"></script>

        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/d3.v3.min.js"></script>
        <script src="/js/d3-timeline.js"></script>    

		<script src="/js/lib/bootbox.min.js"></script>

		<script src="/js/lib/picker.js"></script>
		<script src="/js/lib/picker.date.js"></script>

        <script src="/js/player.js"></script>
    </head>


    <body style = "margin: 10px">
		<!-- <div style = 'opacity: 0.5; position:absolute; top:0px; right:0px'> -->
		<!-- 	<a href= "/v1/cameras/<%= _id  %>">v1</a>  -->
		<!-- </div> -->

	<h2 class = 'text-muted'> <a href ="/cameras">cameras</a> | <span id='camera_name'><%= name %></span> </h2> 
        <hr>
		
		<div id = 'stream-selector-container' style = 'width: 300px; height: 70px;'>
			<label for="stream-selector">streams</label>
			<select id = 'stream-selector' class="form-control col-xs-4 input-sm"></select>
		</div>

        <div id = "search-bar" class="form-inline">

            <input id="begin_date" type="text" placeholder="select a day" ></input>

            <!-- <button id = "get&#45;snapshot" class = 'btn btn&#45;xs btn&#45;default'>get a snapshot</button> -->
            <button id = "get-livestream" class = 'btn btn-xs btn-default'>livestream</button>
			<button id = "download" class = 'btn btn-xs btn-default'>download video</button>
        </div>

		<div id = "time-map">
			<div id = "date-selector"></div>	


			<!-- include those lines to add a timeline to your page -->
			<div id = "marker"></div>
			<div id = "zoom-back"> zoom out </div>
			<div id = "timeline">
				<div id = "timeline-selector"></div>
			</div>				
			<!-- include those lines to add a timeline to your page -->


			<button id = "toggle-play" class = 'btn btn-default btn-xs'>
				<span id='play-icon' class="glyphicon glyphicon-play"></span> 
			</button>
			<button id = "toggle-motion" class = 'toggle-motion btn btn-default btn-xs'></button>
		</div>
		 
		<div id = "curr-time"></div>

		<div id = "video" style = "width:640px; height:480px; background:rgb(240,240,240); margin: 20px;position:relative; overflow:hidden" class = "shadow">
		</div>

		<div id = "thumb">
			<div id = 'thumb-time'></div>
			<img src = ""/>
        </div>

		<div id = "grid" style="width:300px; height:300px;background:none">
		</div>


        <script>

			var ROI = "";

			var frames = [];
			var index = 0;

			var camPage;
            $(function() {
				camPage = new CameraPage( camId );
				camPage.setup();			
            });

			var socket = io.connect();
			socket.on('time', function(data) {
				local_offset = (new Date()).getTimezoneOffset()/60;
				Date.tz_offset = local_offset - data.tz_offset;
			});

        </script>

    </body>
</html>
