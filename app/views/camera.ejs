<html>
    <head>
		<script>
			var camId = "<%= _id %>";
		</script>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="/css/jquery-ui.css">
		<link rel="stylesheet" href="/css/lib/default.css">
		<link rel="stylesheet" href="/css/lib/default.date.css">
		<link rel="stylesheet" href="/css/lib/cspinners.css" />

        <link rel="stylesheet" href="/css/cam.css">
		
        <script src = "/js/jquery.min.js"></script>        
        <script src = "/js/jquery-ui.min.js"></script>

        <script src="/js/socket.io.js"></script>

		<script src = "/js/indexer.js"></script> 
		<script src = "/js/timeline.js"></script>

		<script type="text/javascript" src="/js/swfobject.js"></script>
        <script src = "/js/cameraPage.js"></script>

        <script src="/js/moment.min.js"></script>
        <script src="/js/lib/path.min.js"></script>

        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/d3.v3.min.js"></script>
        <script src="/js/d3-timeline.js"></script>    

		<script src="/js/lib/bootbox.min.js"></script>

		<script src="/js/lib/picker.js"></script>
		<script src="/js/lib/picker.date.js"></script>

		<script src="/js/timeline-selector.js"></script>

        <script src="/js/video-js/video.js"></script>
        <script src="/js/video-js/videojs.hls.js"></script>

        <script src="/js/player.js"></script>
    </head>


    <body style = "margin: 10px">
		<!-- <div style = 'opacity: 0.5; position:absolute; top:0px; right:0px'> -->
		<!-- 	<a href= "/v1/cameras/<%= _id  %>">v1</a>  -->
		<!-- </div> -->

	<h2 class = 'text-muted'> <a href ="/cameras">cameras</a> | <span id='camera_name'><%= name %></span> </h2> 
        <hr>
		
		<div id = 'stream-selector-container' style = 'width: 300px; height: 70px;'>
			<label for="stream-selector">streams</label>
			<select id = 'stream-selector' class="form-control col-xs-4 input-sm"></select>
		</div>

        <div id = "search-bar" class="form-inline">

            <input id="begin_date" type="text" placeholder="select a day" ></input>

            <!-- <button id = "get&#45;snapshot" class = 'btn btn&#45;xs btn&#45;default'>get a snapshot</button> -->
            <button id = "get-livestream" class = 'btn btn-xs btn-default'>livestream</button>
			<button id = "download" class = 'btn btn-xs btn-default'>download video</button>
        </div>

		<div id = "time-map">
			<div id = "date-selector"></div>	
			<div id = "marker"></div>
			<div id = "zoom-back"> zoom out </div>
			<div id = "timeline">
				<div id = "timeline-begin-time" class = 'timeline-time'> </div>
				<div id = "timeline-end-time" class = 'timeline-time'> </div>

				<div id = "timeline-selector"></div>
			</div>				
		<button id = "toggle-motion" class = 'toggle-motion btn btn-default btn-xs'></button>
		</div>
		 
		<div id = "video" style = "width:640px; height:480px; background:rgb(240,240,240); margin: 20px;position:relative; overflow:hidden" class = "shadow">
		</div>

		<div id = "thumb" style = "display:none; position: absolute; z-index: 1000">
			<div id = 'thumb-time'></div>
			<img src = ""/>
        </div>

		<!-- <div id = "vd_zoom" style=" -->
		<!-- 	position:  absolute; -->
		<!-- 	width:  640px; -->
		<!-- 	height: 480px; -->
		<!-- 	top: 270px; -->
		<!-- 	left: 30px; -->
		<!-- "></div>	 -->

		<script>
// 			var left = 0;
// 			var top = 0;
// 			var drag = false;
// 			var clicked = false;
// 			var px, py;
// 			$('#vd_zoom').click(function() {
// 				if (drag) return;
// 				var w = $('object').attr('width');
// 				var h = $('object').attr('height');
// 				$('object').attr('width', 1.2*w);
// 				$('object').attr('height', 1.2*h);
// 			});	
// 			
// 			$('#vd_zoom').on('mousedown', function(e) {
// 				clicked = true;
// 				drag = false;
// 				px = e.pageX;
// 				py = e.pageY;
// 			});	
// 			$('#vd_zoom').on('mousemove', function(e) {
// 				if (!clicked) return;
// 				var dx = e.pageX - px;
// 				var dy = e.pageY - py;
// 				px = e.pageX;
// 				py = e.pageY;
// 				console.log(dx);
// 				console.log(dy);
// 				if (Math.abs(dx) > 10 || Math.abs(dy) > 10) drag = true;
// 				var l = parseInt( $('object').css('left') );
// 				var t = parseInt( $('object').css('top') );
// 				var w = parseInt( $('object').attr('width') );
// 				var h = parseInt( $('object').attr('height') );
// 				l += dx;
// 				t += dy;
// 				
// 				$('object').css('left', l);
// 				$('object').css('top', t);
// 			});
//
// 			$('#vd_zoom').on('mouseup', function(e) {
// 				clicked = false;
// 			});	

		</script>

        <script>
			var camPage;
            $(function() {
				camPage = new CameraPage( camId );
				camPage.setup();			
            });
	
			Path.map("#/zoom/:begin").to(function(){
				console.log("begin: " + this.params['begin']);
			});

//  Path.map("#/users/:user_id").to(function(){
// 	             $("#output .content").html("You selected the user with ID: " + this.params["user_id"]);
// 				         });
//
// 			Path.map("#/comments").to(function(){
// 				alert("Comments!");
// 			}).enter(clearPanel);
//
// 			Path.map("#/posts").to(function(){
// 				alert("Posts!");
// 			}).enter(clearPanel);

			Path.root("#");

			Path.listen();	
        </script>

    </body>
</html>
