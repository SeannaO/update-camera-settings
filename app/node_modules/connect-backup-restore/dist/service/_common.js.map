{"version":3,"sources":["../../src/service/_common.js"],"names":[],"mappings":";;;;;QAKgB,S,GAAA,S;QAKA,c,GAAA,c;QAIA,c,GAAA,c;;AAdhB;;IAAY,I;;AAEZ;;;;;;;;AACA,IAAM,KAAK,mBAAQ,YAAR,CAAqB,QAAQ,UAAR,CAArB,CAAX;;AAEO,SAAS,SAAT,CAAmB,GAAnB,EAAwB,GAAxB,EAA6B;AAClC,SAAO,GAAG,SAAH,CAAa,GAAb,EAAkB,GAAlB,EAAuB,EAAE,oBAAoB,IAAtB,EAAvB,EACN,KADM,CACA,EAAC,MAAM,QAAP,EADA,EACkB;AAAA,WAAK,IAAL;AAAA,GADlB,CAAP;AAED;;AAEM,SAAS,cAAT,CAAwB,GAAxB,EAA6B,GAA7B,EAAkC;AACvC,SAAO,GAAG,SAAH,CAAa,GAAb,EAAkB,GAAlB,EAAuB,EAAE,SAAS,IAAX,EAAvB,CAAP;AACD;;AAEM,SAAS,cAAT,CAAwB,MAAxB,EAAgC,IAAhC,EAAsC;AAC3C,MAAI,YAAY,KAAK,IAAL,CAAU,MAAV,EAAkB,gBAAlB,CAAhB;AACA,SAAO,GAAG,SAAH,CAAa,SAAb,EACN,IADM,CACD,aAAK;;AAET,WAAO,KAAK,SAAL,EACN,IADM,CACD;AAAA,aAAK,GAAG,WAAH,CAAe,SAAf,CAAL;AAAA,KADC,CAAP;AAED,GALM,EAMN,KANM,CAMA,EAAC,MAAM,QAAP,EANA,EAMkB;AAAA,WAAK,IAAL;AAAA,GANlB,CAAP;AAOD","file":"_common.js","sourcesContent":["import * as path from 'path'\n\nimport Promise from 'bluebird'\nconst fs = Promise.promisifyAll(require('fs-extra'))\n\nexport function copyAsync(src, dst) {\n  return fs.copyAsync(src, dst, { preserveTimestamps: true })\n  .catch({code: 'ENOENT'}, e => null);\n}\n\nexport function overwriteAsync(src, dst) {\n  return fs.moveAsync(src, dst, { clobber: true });\n}\n\nexport function restoreWrapper(cfgDir, func) {\n  let backupDir = path.join(cfgDir, 'config.restore');\n  return fs.statAsync(backupDir)\n  .then(x => {\n    // TODO: backup the old config in the next iteration\n    return func(backupDir)\n    .then(x => fs.removeAsync(backupDir));\n  })\n  .catch({code: 'ENOENT'}, e => null);\n}\n"]}